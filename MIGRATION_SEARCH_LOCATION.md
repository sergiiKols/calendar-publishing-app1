# –ú–∏–≥—Ä–∞—Ü–∏—è: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ search_location_code –≤ –ø—Ä–æ–µ–∫—Ç—ã

## üìã –û–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ `search_location_code` –≤ —Ç–∞–±–ª–∏—Ü—É `projects`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞–∂–¥–æ–º—É –ø—Ä–æ–µ–∫—Ç—É –∏–º–µ—Ç—å —Å–≤–æ–π —Ä–µ–≥–∏–æ–Ω –¥–ª—è SEO-–∑–∞–ø—Ä–æ—Å–æ–≤ DataForSEO.

## üéØ –¶–µ–ª—å
- –£–±—Ä–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤—ã–±–∏—Ä–∞—Ç—å —Ä–µ–≥–∏–æ–Ω –ø—Ä–∏ –∫–∞–∂–¥–æ–º SEO-–∑–∞–ø—Ä–æ—Å–µ
- –•—Ä–∞–Ω–∏—Ç—å —Ä–µ–≥–∏–æ–Ω –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å UX - –æ–¥–∏–Ω –ø—Ä–æ–µ–∫—Ç = –æ–¥–∏–Ω —Ä–µ–≥–∏–æ–Ω –ø–æ–∏—Å–∫–∞

## üöÄ –ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ API endpoint (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
curl http://your-domain.com/api/db/migrate-search-location
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ SQL –Ω–∞–ø—Ä—è–º—É—é
–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
-- –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–µ
ALTER TABLE projects 
ADD COLUMN IF NOT EXISTS search_location_code INTEGER DEFAULT 2840;

-- –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å
CREATE INDEX IF NOT EXISTS idx_projects_location 
ON projects(search_location_code);

-- –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã
UPDATE projects 
SET search_location_code = 2840 
WHERE search_location_code IS NULL;
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ Node.js —Å–∫—Ä–∏–ø—Ç
```bash
node run-search-location-migration.js
```

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã

| –ö–æ–¥  | –†–µ–≥–∏–æ–Ω           | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
|------|------------------|---------------------------------------------|
| 2840 | üá∫üá∏ –°–®–ê          | –ê–Ω–≥–ª–æ—è–∑—ã—á–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è, –±–æ–ª—å—à–æ–π –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö |
| 2144 | üá±üá∞ –®—Ä–∏-–õ–∞–Ω–∫–∞    | –õ–æ–∫–∞–ª—å–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è, –≤—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç—å     |
| 2826 | üá¨üáß –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è | –ê–Ω–≥–ª–æ—è–∑—ã—á–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è, –ï–≤—Ä–æ–ø–∞             |
| 2643 | üá∑üá∫ –†–æ—Å—Å–∏—è       | –†—É—Å—Å–∫–æ—è–∑—ã—á–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è                     |
| 2124 | üá®üá¶ –ö–∞–Ω–∞–¥–∞       | –ê–Ω–≥–ª–æ/—Ñ—Ä–∞–Ω–∫–æ—è–∑—ã—á–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è               |
| 2036 | üá¶üá∫ –ê–≤—Å—Ç—Ä–∞–ª–∏—è    | –ê–Ω–≥–ª–æ—è–∑—ã—á–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è, –û–∫–µ–∞–Ω–∏—è             |

## ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### Backend
- `lib/db/client.ts` - —Ñ—É–Ω–∫—Ü–∏–∏ `createProject` –∏ `updateProject` —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç `search_location_code`
- `app/api/projects/route.ts` - POST –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `search_location_code`
- `app/api/projects/[id]/route.ts` - PATCH –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `search_location_code`
- `app/api/seo/keywords/route.ts` - –±–µ—Ä–µ—Ç `location_code` –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
- `app/api/seo/semantic-cluster/route.ts` - –±–µ—Ä–µ—Ç `location_code` –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞

### Frontend
- `components/ProjectModal.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–±–æ—Ä —Ä–µ–≥–∏–æ–Ω–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
- `components/KeywordSubmitForm.tsx` - —É–±—Ä–∞–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ `location_code` –∏ `location_name`
- `components/SemanticClusterForm.tsx` - —É–±—Ä–∞–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ `location_code` –∏ `location_name`

### DataForSEO API
- `lib/dataforseo/labs-client.ts` - —Ñ—É–Ω–∫—Ü–∏—è `getLabsKeywordsForKeywords` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è **Related Keywords API** –≤–º–µ—Å—Ç–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ **Keywords for Keywords API**

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SEO –º–æ–¥—É–ª—å
3. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Ç–µ—Ä - —Ä–µ–≥–∏–æ–Ω –¥–æ–ª–∂–µ–Ω –±—Ä–∞—Ç—å—Å—è –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Keywords for Keywords —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–µ–ø–µ—Ä—å —á–µ—Ä–µ–∑ Related Keywords API)

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
SELECT column_name, data_type, column_default 
FROM information_schema.columns 
WHERE table_name = 'projects' 
AND column_name = 'search_location_code';

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–µ–∫—Ç—ã —Å —Ä–µ–≥–∏–æ–Ω–∞–º–∏
SELECT id, name, search_location_code 
FROM projects;
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ–ª—É—á–∞—Ç —Ä–µ–≥–∏–æ–Ω USA (2840) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–µ–≥–∏–æ–Ω —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- –î–ª—è Sri Lanka (2144) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Related Keywords API - –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ 8.6 —Ä–∞–∑ –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ–º USA!

## üîß –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```sql
ALTER TABLE projects DROP COLUMN IF EXISTS search_location_code;
DROP INDEX IF EXISTS idx_projects_location;
```
