# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Calendar App Ğ² Docker

## ğŸ“ Ğ¡Ñ…ĞµĞ¼Ğ° Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Ğ’ĞĞ¨ Ğ¡Ğ•Ğ Ğ’Ğ•Ğ                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Docker Network: calendar-network             â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ â”‚
â”‚  â”‚  â”‚  calendar-app   â”‚      â”‚  calendar-db     â”‚           â”‚ â”‚
â”‚  â”‚  â”‚  (Next.js)      â”‚â—„â”€â”€â”€â”€â–ºâ”‚  (PostgreSQL 15) â”‚           â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚      â”‚                  â”‚           â”‚ â”‚
â”‚  â”‚  â”‚  Port: 3000     â”‚      â”‚  Port: 5432      â”‚           â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  (external 5433) â”‚           â”‚ â”‚
â”‚  â”‚           â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ â”‚
â”‚  â”‚           â”‚                          â”‚                   â”‚ â”‚
â”‚  â”‚           â”‚                          â”‚                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚  calendar-cron  â”‚                 â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚  (Alpine)       â”‚                 â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚                 â”‚                   â”‚ â”‚
â”‚  â”‚  â”‚  Cron: */15min  â”‚                 â”‚                   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚                   â”‚ â”‚
â”‚  â”‚                                      â”‚                   â”‚ â”‚
â”‚  â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚                           â”‚  Volume:             â”‚       â”‚ â”‚
â”‚  â”‚                           â”‚  calendar-db-data    â”‚       â”‚ â”‚
â”‚  â”‚                           â”‚  (Persistent)        â”‚       â”‚ â”‚
â”‚  â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  Exposed Ports:                                                â”‚
â”‚  â€¢ 3000 â†’ Next.js App                                          â”‚
â”‚  â€¢ 5433 â†’ PostgreSQL (external access)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚
                              â”‚ HTTP/HTTPS
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ˜    â”‚
                    â”‚   Ğ¸Ğ»Ğ¸ SMI Ğ¿Ñ€Ğ¾ĞµĞºÑ‚  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1ï¸âƒ£ ĞŸÑ€Ğ¸ĞµĞ¼ ÑÑ‚Ğ°Ñ‚ĞµĞ¹ Ğ¸Ğ· SMI Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
SMI Project
    â”‚
    â”‚ POST /api/articles/receive
    â”‚ Header: X-API-Key: xxx
    â”‚
    â–¼
calendar-app:3000
    â”‚
    â”‚ Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ API ĞºĞ»ÑÑ‡Ğ°
    â”‚ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”
    â”‚
    â–¼
calendar-db (PostgreSQL)
    â”‚
    â””â”€â”€ inbox_articles table
```

### 2ï¸âƒ£ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¹

```
ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ (Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€)
    â”‚
    â”‚ Drag & Drop Ğ² ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€Ğµ
    â”‚
    â–¼
calendar-app:3000
    â”‚
    â”‚ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
    â”‚
    â–¼
calendar-db
    â”‚
    â””â”€â”€ calendar_events table
```

### 3ï¸âƒ£ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

```
calendar-cron
    â”‚
    â”‚ ĞšĞ°Ğ¶Ğ´Ñ‹Ğµ 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚
    â”‚
    â–¼
curl â†’ calendar-app:3000/api/cron/publish
    â”‚
    â”‚ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° CRON_SECRET
    â”‚ ĞŸĞ¾Ğ¸ÑĞº ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
    â”‚
    â–¼
calendar-db
    â”‚
    â”‚ SELECT events WHERE scheduled_time <= NOW()
    â”‚
    â–¼
calendar-app
    â”‚
    â”œâ”€â”€â–º WordPress API
    â”œâ”€â”€â–º Telegram Bot API
    â”œâ”€â”€â–º Facebook Graph API
    â”œâ”€â”€â–º Instagram Graph API
    â””â”€â”€â–º LinkedIn API
```

---

## ğŸ—„ï¸ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ PostgreSQL:

```sql
calendar_db
â”œâ”€â”€ users                    -- ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
â”œâ”€â”€ inbox_articles           -- Ğ’Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸ Ğ¸Ğ· SMI
â”œâ”€â”€ calendar_events          -- Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
â”œâ”€â”€ publishing_platforms     -- ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ÑĞ¾Ñ†ÑĞµÑ‚ĞµĞ¹ (Ñ‚Ğ¾ĞºĞµĞ½Ñ‹)
â””â”€â”€ publish_logs             -- Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¹
```

### Ğ¡Ğ²ÑĞ·Ğ¸:

```
users (1) â”€â”€â”€â”€â”€â”€â”€â–º (N) calendar_events
                        â”‚
inbox_articles (1) â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â””â”€â”€â–º (N) publish_logs
                                   â”‚
publishing_platforms (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Ğ˜Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ ÑĞµÑ‚ÑŒ Docker

```
calendar-network (bridge)
    â”‚
    â”œâ”€â”€ calendar-app      (Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ğ±Ñ‰Ğ°Ñ‚ÑŒÑÑ Ñ Ğ‘Ğ”)
    â”œâ”€â”€ calendar-db       (Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ÑĞµÑ‚Ğ¸)
    â””â”€â”€ calendar-cron     (Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ğ±Ñ‰Ğ°Ñ‚ÑŒÑÑ Ñ app)

Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğº:
    â€¢ calendar-app:3000   (Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ñ€Ğ¾Ğ±Ñ€Ğ¾Ñ Ğ¿Ğ¾Ñ€Ñ‚Ğ°)
    â€¢ calendar-db:5433    (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, Ğ´Ğ»Ñ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ°)
```

### Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¡ĞµĞºÑ€ĞµÑ‚Ñ‹ (Ğ² .env Ñ„Ğ°Ğ¹Ğ»Ğµ)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  POSTGRES_PASSWORD   â†’ Ğ‘Ğ” Ğ´Ğ¾ÑÑ‚ÑƒĞ¿    â”‚
â”‚  NEXTAUTH_SECRET     â†’ Ğ¡ĞµÑÑĞ¸Ğ¸       â”‚
â”‚  CALENDAR_API_KEY    â†’ API Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°   â”‚
â”‚  CRON_SECRET         â†’ Cron Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ĞŸĞ°Ñ€Ğ¾Ğ»Ğ¸ â†’ bcrypt hash               â”‚
â”‚  Ğ¢Ğ¾ĞºĞµĞ½Ñ‹ ÑĞ¾Ñ†ÑĞµÑ‚ĞµĞ¹ â†’ AES-256 encrypt  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²

### ĞŸÑ€Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ `docker-compose up -d`:

```
1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞµÑ‚Ğ¸
   â””â”€â”€ calendar-network

2. Ğ—Ğ°Ğ¿ÑƒÑĞº PostgreSQL
   â”œâ”€â”€ ĞœĞ¾Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ volume: calendar-db-data
   â”œâ”€â”€ Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ” (ĞµÑĞ»Ğ¸ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº)
   â”‚   â””â”€â”€ Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ: lib/db/schema.sql
   â”œâ”€â”€ Healthcheck ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 10 ÑĞµĞº
   â””â”€â”€ ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸

3. Ğ—Ğ°Ğ¿ÑƒÑĞº Next.js App (Ğ¿Ğ¾ÑĞ»Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ‘Ğ”)
   â”œâ”€â”€ ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº calendar-db:5432
   â”œâ”€â”€ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ (ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑĞ¾Ğ±Ñ€Ğ°Ğ½Ğ¾)
   â”œâ”€â”€ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ñƒ 3000
   â””â”€â”€ Ğ“Ğ¾Ñ‚Ğ¾Ğ² Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹

4. Ğ—Ğ°Ğ¿ÑƒÑĞº Cron
   â”œâ”€â”€ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° curl
   â”œâ”€â”€ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° crontab (*/15 Ğ¼Ğ¸Ğ½ÑƒÑ‚)
   â””â”€â”€ Ğ—Ğ°Ğ¿ÑƒÑĞº crond daemon
```

### ĞŸÑ€Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ ĞºĞ¾Ğ´Ğ°:

```
docker-compose down
    â”‚
    â”œâ”€â”€ ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
    â”œâ”€â”€ Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
    â””â”€â”€ Ğ¡ĞµÑ‚ÑŒ Ğ¾ÑÑ‚Ğ°ĞµÑ‚ÑÑ, Volume Ğ¾ÑÑ‚Ğ°ĞµÑ‚ÑÑ

git pull  (Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµĞ½Ğ¾Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²)

docker-compose build --no-cache
    â”‚
    â””â”€â”€ ĞŸĞµÑ€ĞµÑĞ±Ğ¾Ñ€ĞºĞ° Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ° app

docker-compose up -d
    â”‚
    â”œâ”€â”€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
    â”œâ”€â”€ ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ¼Ñƒ volume
    â””â”€â”€ Ğ—Ğ°Ğ¿ÑƒÑĞº
```

---

## ğŸ’¾ ĞŸĞµÑ€ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ§Ñ‚Ğ¾ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞºĞµ:

âœ… **Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ PostgreSQL** â†’ Volume: `calendar-db-data`
- Ğ’ÑĞµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
- Ğ’ÑĞµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸
- ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ‘Ğ”

### Ğ§Ñ‚Ğ¾ Ñ‚ĞµÑ€ÑĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€ĞµÑĞ±Ğ¾Ñ€ĞºĞµ:

âŒ **Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ° app** (ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ² volume)
- Ğ›Ğ¾Ğ³Ğ¸ (ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¾ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
- Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹
- ĞšÑÑˆ Next.js (`.next/`)

### Backup ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ:

```bash
# Ğ•Ğ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğ¹ backup Ğ‘Ğ”
0 3 * * * docker-compose exec postgres \
  pg_dump -U calendar_user calendar_db \
  > /backups/calendar_$(date +\%Y\%m\%d).sql

# ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° ÑÑ‚Ğ°Ñ€Ñ‹Ñ… backup (ÑÑ‚Ğ°Ñ€ÑˆĞµ 30 Ğ´Ğ½ĞµĞ¹)
0 4 * * * find /backups -name "calendar_*.sql" \
  -mtime +30 -delete
```

---

## ğŸ”§ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²

### Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹ (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ² docker-compose.yml):

```yaml
# ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ²:
calendar-app:
  deploy:
    resources:
      limits:
        cpus: '1.0'      # ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 1 CPU
        memory: 512M      # ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 512 MB RAM
      reservations:
        cpus: '0.5'      # ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 0.5 CPU
        memory: 256M      # ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 256 MB RAM
```

### ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:

```bash
# Ğ ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ
docker stats

# Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:
NAME              CPU %   MEM USAGE / LIMIT    MEM %   NET I/O
calendar-nextjs   5%      350MB / 512MB        68%     1.2MB / 850KB
calendar-postgres 2%      150MB / 512MB        29%     800KB / 1.1MB
calendar-cron     0.1%    5MB / 50MB           10%     10KB / 8KB
```

---

## ğŸŒ ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ“Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ (Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ½ÑÑ‚Ğ°Ğ½ÑĞ¾Ğ² app):

```yaml
# Ğ’ docker-compose.yml:
calendar-app:
  deploy:
    replicas: 3  # 3 Ğ¸Ğ½ÑÑ‚Ğ°Ğ½ÑĞ° Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Load Balancer (nginx):
nginx:
  image: nginx:alpine
  volumes:
    - ./nginx-lb.conf:/etc/nginx/nginx.conf
  ports:
    - "80:80"
```

### Ğ’ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ (Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²):

```bash
# Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ¸ CPU Ğ² docker-compose.yml
# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ RAM Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€
# Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ SSD Ğ´Ğ»Ñ volume
```

---

## ğŸ”„ CI/CD Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ

### GitHub Actions Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€:

```yaml
# .github/workflows/deploy.yml
name: Deploy to Server

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Deploy via SSH
        run: |
          ssh user@server "cd /path/to/calendar-app && \
            git pull && \
            docker-compose down && \
            docker-compose build --no-cache && \
            docker-compose up -d"
```

---

## ğŸ“Š Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ²:

```bash
# Ğ’ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
docker-compose logs -f

# Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
docker-compose logs -f app

# ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 100 ÑÑ‚Ñ€Ğ¾Ğº
docker-compose logs --tail=100 app

# Ğ¡ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¼ĞµÑ‚ĞºĞ°Ğ¼Ğ¸
docker-compose logs -f -t app
```

### ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ñ€Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Ğ»Ğ¾Ğ³Ğ¾Ğ²:

```yaml
# Ğ’ docker-compose.yml:
calendar-app:
  logging:
    driver: "json-file"
    options:
      max-size: "10m"
      max-file: "3"
```

---

## âœ… Health Checks

### PostgreSQL:

```yaml
healthcheck:
  test: ["CMD-SHELL", "pg_isready -U calendar_user"]
  interval: 10s
  timeout: 5s
  retries: 5
```

### Next.js App (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ):

```yaml
calendar-app:
  healthcheck:
    test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:3000/api/health"]
    interval: 30s
    timeout: 10s
    retries: 3
```

---

**Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ñƒ Ğ²Ğ°Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹! ğŸš€**
