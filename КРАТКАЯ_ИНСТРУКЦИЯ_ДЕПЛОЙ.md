# ‚ö° –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –î–µ–ø–ª–æ–π –Ω–∞ calendar.energo-audit.online

## üéØ –ö—Ä–∞—Ç–∫–æ: –ß—Ç–æ –¥–µ–ª–∞—Ç—å?

–í–∞—à –ø—Ä–æ–µ–∫—Ç —É–∂–µ –≤ Docker. –ù—É–∂–Ω–æ 3 –≤–µ—â–∏:
1. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å URL –≤ `.env`
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx
3. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

---

## üìã –®–∞–≥ –∑–∞ —à–∞–≥–æ–º (5 –º–∏–Ω—É—Ç)

### 1Ô∏è‚É£ –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: –æ–±–Ω–æ–≤–∏—Ç—å .env

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@your-server

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /path/to/calendar-app

# –û—Ç–∫—Ä–æ–π—Ç–µ .env
nano .env
```

**–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:**
```
NEXTAUTH_URL=http://localhost:3000
```

**–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞:**
```
NEXTAUTH_URL=https://calendar.energo-audit.online
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+O`, `Enter`, `Ctrl+X`

---

### 2Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Docker

```bash
docker-compose down
docker-compose up -d
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
```bash
docker-compose ps
```

–í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `Up`

---

### 3Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx

```bash
# –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nano /etc/nginx/sites-available/calendar
```

**–í—Å—Ç–∞–≤—å—Ç–µ:**
```nginx
server {
    listen 80;
    server_name calendar.energo-audit.online;
    
    client_max_body_size 50M;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+O`, `Enter`, `Ctrl+X`

**–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å:**
```bash
sudo ln -s /etc/nginx/sites-available/calendar /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

---

### 4Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å SSL (HTTPS)

```bash
sudo apt install certbot python3-certbot-nginx -y
sudo certbot --nginx -d calendar.energo-audit.online
```

–û—Ç–≤–µ—Ç—å—Ç–µ:
- Email: –≤–∞—à email
- –°–æ–≥–ª–∞—Å–∏–µ: `Y`
- Redirect HTTP‚ÜíHTTPS: `2` (–¥–∞)

---

### 5Ô∏è‚É£ –ì–æ—Ç–æ–≤–æ! üéâ

–û—Ç–∫—Ä–æ–π—Ç–µ: **https://calendar.energo-audit.online**

---

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û—à–∏–±–∫–∞ 502 Bad Gateway
```bash
docker-compose ps  # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
docker-compose logs calendar-app  # –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
```

### –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS:
```bash
nslookup calendar.energo-audit.online
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞. –ï—Å–ª–∏ –Ω–µ—Ç - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ A-–∑–∞–ø–∏—Å—å –≤ DNS:
- **–ò–º—è:** `calendar`
- **–¢–∏–ø:** `A`
- **–ó–Ω–∞—á–µ–Ω–∏–µ:** `IP_–≤–∞—à–µ–≥–æ_—Å–µ—Ä–≤–µ—Ä–∞`

### NextAuth –æ—à–∏–±–∫–∞
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env:
```bash
cat .env | grep NEXTAUTH_URL
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `NEXTAUTH_URL=https://calendar.energo-audit.online`

---

## üìù –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç

–í–º–µ—Å—Ç–æ —à–∞–≥–æ–≤ 1-2 –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `update-domain.sh`:

```bash
chmod +x update-domain.sh
./update-domain.sh
```

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —à–∞–≥–∏ 3-4 (Nginx –∏ SSL).

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] DNS —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
- [ ] `.env` –æ–±–Ω–æ–≤–ª–µ–Ω: `NEXTAUTH_URL=https://calendar.energo-audit.online`
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã
- [ ] Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ HTTPS

---

**–í—Å—ë! –¢–µ–ø–µ—Ä—å –≤–∞—à Calendar App –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ https://calendar.energo-audit.online** üöÄ
