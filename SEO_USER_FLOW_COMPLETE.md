# ğŸ”„ ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿ÑƒÑ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°: Ğ¡Ğ±Ğ¾Ñ€ ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ ÑĞ´Ñ€Ğ°

**Ğ”Ğ°Ñ‚Ğ°:** 2026-02-28  
**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:** ĞŸĞ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ñ‹Ğ¹ flow ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ğ¾Ñ‚ Ğ²Ğ²Ğ¾Ğ´Ğ° seed-ĞºĞ»ÑÑ‡ĞµĞ¹ Ğ´Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°

---

## ğŸ“‹ ĞĞ“Ğ›ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•

1. [Ğ¨Ğ°Ğ³ 1: ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ñƒ Ğ¸ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ seeds](#ÑˆĞ°Ğ³-1)
2. [Ğ¨Ğ°Ğ³ 2: ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€](#ÑˆĞ°Ğ³-2)
3. [Ğ¨Ğ°Ğ³ 3: Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ keywords Ñ‡ĞµÑ€ĞµĞ· DataForSEO Labs](#ÑˆĞ°Ğ³-3)
4. [Ğ¨Ğ°Ğ³ 4: ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº (SV, CPC, KD)](#ÑˆĞ°Ğ³-4)
5. [Ğ¨Ğ°Ğ³ 5: SERP Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¸ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ intent](#ÑˆĞ°Ğ³-5)
6. [Ğ¨Ğ°Ğ³ 6: ĞšĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (DBSCAN)](#ÑˆĞ°Ğ³-6)
7. [Ğ¨Ğ°Ğ³ 7: Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”](#ÑˆĞ°Ğ³-7)
8. [Ğ¨Ğ°Ğ³ 8: Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ](#ÑˆĞ°Ğ³-8)
9. [Ğ¨Ğ°Ğ³ 9: ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¸ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚](#ÑˆĞ°Ğ³-9)

---

## <a name="ÑˆĞ°Ğ³-1"></a>Ğ¨ĞĞ“ 1: ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ñƒ Ğ¸ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ seeds

### ğŸ‘¤ Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°:
1. ĞÑ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ `/seo`
2. ĞĞ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "âœ¨ Ğ¡ĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€"
3. Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ñƒ `SemanticClusterForm`:
   - **Seeds** (3-5 ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²):
     ```
     yacht charter
     boat rental
     sailing vacation
     ```
   - **Ğ¯Ğ·Ñ‹Ğº:** Ğ ÑƒÑÑĞºĞ¸Ğ¹ (ru)
   - **Ğ ĞµĞ³Ğ¸Ğ¾Ğ½:** Russia (2643)
   - **ĞŸÑ€Ğ¾ĞµĞºÑ‚:** Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¸Ğ· ÑĞ¿Ğ¸ÑĞºĞ° (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

### ğŸ’» Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ² ĞºĞ¾Ğ´Ğµ:

**Ğ¤Ğ°Ğ¹Ğ»:** `components/SemanticClusterForm.tsx`

```typescript
// Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 69-128
const handleSubmit = async (e: React.FormEvent) => {
  e.preventDefault();
  
  // Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ: Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 3 seeds
  const seedList = seeds.split('\n').filter(s => s.trim());
  if (seedList.length < 3) {
    toast.error('ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 3 seed-ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²Ğ°');
    return;
  }
  
  setIsSubmitting(true);
  setProgress('ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°...');
  
  // Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸
  const requestData = {
    seeds: seedList,
    language: language,
    location_code: location,
    location_name: getLocationName(location),
    project_id: selectedProject || null,
    target_size: 100, // Ñ†ĞµĞ»ĞµĞ²Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²
  };
}
```

### âœ… Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:
ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ loading state Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ¾Ğ¼:
```
[Loader] ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°...
```

---

## <a name="ÑˆĞ°Ğ³-2"></a>Ğ¨ĞĞ“ 2: ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€

### ğŸ’» Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚:

**Ğ¤Ğ°Ğ¹Ğ»:** `components/SemanticClusterForm.tsx` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 116-124)

```typescript
const response = await fetch('/api/seo/semantic-cluster', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(requestData),
});

const data = await response.json();
```

### ğŸ“¡ HTTP Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ:
```http
POST /api/seo/semantic-cluster HTTP/1.1
Content-Type: application/json

{
  "seeds": ["yacht charter", "boat rental", "sailing vacation"],
  "language": "ru",
  "location_code": "2643",
  "location_name": "Russia",
  "project_id": null,
  "target_size": 100
}
```

### ğŸ” ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:

**Ğ¤Ğ°Ğ¹Ğ»:** `app/api/seo/semantic-cluster/route.ts` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 19-38)

```typescript
// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞµÑÑĞ¸Ğ¸
const session = await getServerSession(authOptions);
if (!session?.user?.email) {
  return NextResponse.json(
    { success: false, error: 'Unauthorized' },
    { status: 401 }
  );
}

// ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ user_id Ğ¸Ğ· Ğ‘Ğ”
const userResult = await sql`
  SELECT id FROM users WHERE email = ${session.user.email}
`;
const userId = userResult.rows[0].id;
```

### âœ… Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:
- âœ… ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½ (userId = 42)
- âœ… Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´ĞµĞ½ (3 seeds, ÑĞ·Ñ‹Ğº Ğ¸ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ñ‹)

---


## <a name="ÑˆĞ°Ğ³-3"></a>Ğ¨ĞĞ“ 3: Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ keywords Ñ‡ĞµÑ€ĞµĞ· DataForSEO Labs

### ğŸ”„ Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚:

**Ğ¤Ğ°Ğ¹Ğ»:** `app/api/seo/semantic-cluster/route.ts` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 81-88)

```typescript
// Ğ’Ñ‹Ğ·Ğ¾Ğ² Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ buildSemanticCluster
const clusterData = await buildSemanticCluster({
  seeds: ["yacht charter", "boat rental", "sailing vacation"],
  language_code: "ru",
  location_code: 2643,
  targetSize: 100,
  competitorDomain: undefined,
});
```

### ğŸ“Š Ğ’Ğ½ÑƒÑ‚Ñ€Ğ¸ buildSemanticCluster:

**Ğ¤Ğ°Ğ¹Ğ»:** `lib/dataforseo/labs-client.ts` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 315-489)

#### 3.1. Labs API: Keywords for Keywords

```typescript
// Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 343-353
const labsData = await getLabsKeywordsForKeywords({
  seeds: ["yacht charter", "boat rental", "sailing vacation"],
  language_code: "ru",
  location_code: 2643,
  limit: 100,
  filters: {
    search_volume_min: 10,  // SEMANTIC_CLUSTER_CONFIG.MIN_SEARCH_VOLUME
    keyword_difficulty_max: 80, // SEMANTIC_CLUSTER_CONFIG.MAX_KEYWORD_DIFFICULTY
  },
});
```

**DataForSEO Request:**
```http
POST https://api.dataforseo.com/v3/dataforseo_labs/google/keywords_for_keywords/live
Authorization: Basic base64(login:password)
Content-Type: application/json

[{
  "keywords": ["yacht charter", "boat rental", "sailing vacation"],
  "language_code": "ru",
  "location_code": 2643,
  "limit": 100,
  "include_serp_info": true,
  "include_seed_keyword": true,
  "filters": [
    ["keyword_info.search_volume", ">=", 10],
    ["keyword_info.keyword_difficulty", "<=", 80]
  ],
  "order_by": ["keyword_info.search_volume,desc"]
}]
```

**DataForSEO Response:**
```json
{
  "status_code": 20000,
  "tasks": [{
    "result": [
      {
        "keyword": "yacht charter mediterranean",
        "keyword_info": {
          "search_volume": 8900,
          "cpc": 3.45,
          "competition": 0.67,
          "keyword_difficulty": 42
        }
      },
      {
        "keyword": "boat rental prices",
        "keyword_info": {
          "search_volume": 5400,
          "cpc": 2.80,
          "competition": 0.54,
          "keyword_difficulty": 38
        }
      },
      // ... ĞµÑ‰Ñ‘ 98 ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²
    ]
  }]
}
```

**ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 356-371):**
```typescript
labsResults.forEach((item: any) => {
  const keyword = item.keyword;
  if (!allKeywords.has(keyword)) {
    allKeywords.set(keyword, {
      keyword: "yacht charter mediterranean",
      search_volume: 8900,
      cpc: 3.45,
      competition: 0.67,
      keyword_difficulty: 42,
      intent: KeywordIntent.INFORMATIONAL, // Ğ±ÑƒĞ´ĞµÑ‚ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½ Ğ¿Ğ¾Ğ·Ğ¶Ğµ
      source: "labs", // Ğ¸Ğ»Ğ¸ "seed" ĞµÑĞ»Ğ¸ ÑÑ‚Ğ¾ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¹ keyword
    });
  }
});
```

### âœ… Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¨Ğ°Ğ³Ğ° 3.1:
```
allKeywords Map (100 Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹):
  "yacht charter mediterranean" => {sv: 8900, cpc: 3.45, ...}
  "boat rental prices" => {sv: 5400, cpc: 2.80, ...}
  "sailing vacation greece" => {sv: 3200, cpc: 2.10, ...}
  ...
```

---

#### 3.2. Labs API: Related Keywords (ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ)

**Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 375-404):**
```typescript
if (allKeywords.size < targetSize) { // ĞµÑĞ»Ğ¸ < 100
  for (const seed of ["yacht charter", "boat rental", "sailing vacation"]) {
    const relatedData = await getLabsRelatedKeywords({
      keyword: seed,
      language_code: "ru",
      location_code: 2643,
      limit: 30,
    });
    
    // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ½Ğ¾Ğ²Ñ‹Ğµ ĞºĞ»ÑÑ‡Ğ¸ Ğ² allKeywords
  }
}
```

**DataForSEO Request (Related Keywords):**
```http
POST https://api.dataforseo.com/v3/dataforseo_labs/google/related_keywords/live

[{
  "keyword": "yacht charter",
  "language_code": "ru",
  "location_code": 2643,
  "limit": 30,
  "include_serp_info": true
}]
```

**Response:**
```json
{
  "tasks": [{
    "result": [
      {
        "keyword": "yacht charter cost",
        "keyword_data": {
          "keyword_info": {
            "search_volume": 2100,
            "cpc": 2.95,
            ...
          }
        }
      }
    ]
  }]
}
```

### âœ… Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¨Ğ°Ğ³Ğ° 3.2:
```
allKeywords Map (Ñ‚ĞµĞ¿ĞµÑ€ÑŒ 130 Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹ Ğ¿Ğ¾ÑĞ»Ğµ related keywords)
```

---

#### 3.3. Labs API: Keywords for Site (ĞµÑĞ»Ğ¸ ÑƒĞºĞ°Ğ·Ğ°Ğ½ ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚)

**Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 407-434):**
```typescript
if (params.competitorDomain && allKeywords.size < targetSize) {
  const siteData = await getLabsKeywordsForSite({
    target: "charterworld.com", // Ğ´Ğ¾Ğ¼ĞµĞ½ ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚Ğ°
    language_code: "ru",
    location_code: 2643,
    limit: 50,
  });
}
```

**DataForSEO Request:**
```http
POST https://api.dataforseo.com/v3/dataforseo_labs/google/keywords_for_site/live

[{
  "target": "charterworld.com",
  "language_code": "ru",
  "location_code": 2643,
  "limit": 50,
  "include_serp_info": true,
  "order_by": ["keyword_data.keyword_info.search_volume,desc"]
}]
```

### âœ… Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¨Ğ°Ğ³Ğ° 3:
```javascript
allKeywords Map (150+ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²):
  - 3 seed keywords
  - 97 from Keywords for Keywords
  - 30 from Related Keywords (Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ seed)
  - 50 from Keywords for Site (ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚)

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:
{
  keyword: "yacht charter mediterranean",
  search_volume: 8900,
  cpc: 3.45,
  competition: 0.67,
  keyword_difficulty: 42,
  intent: INFORMATIONAL, // Ğ±ÑƒĞ´ĞµÑ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ Ğ² ÑˆĞ°Ğ³Ğµ 5
  source: "labs"
}
```

---

## <a name="ÑˆĞ°Ğ³-4"></a>Ğ¨ĞĞ“ 4: ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº (SV, CPC, KD)

### ğŸ’¡ ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ:
ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ÑƒĞ¶Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ñ‹ Ğ² Ğ¨Ğ°Ğ³Ğµ 3, Ñ‚Ğ°Ğº ĞºĞ°Ğº DataForSEO Labs API Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¸Ñ… Ğ²Ğ¼ĞµÑÑ‚Ğµ Ñ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğ¼Ğ¸ ÑĞ»Ğ¾Ğ²Ğ°Ğ¼Ğ¸ Ğ±Ğ»Ğ°Ğ³Ğ¾Ğ´Ğ°Ñ€Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñƒ `include_serp_info: true`.

**Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ:**
- âœ… `search_volume` - Ğ¾Ğ±ÑŠĞµĞ¼ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
- âœ… `cpc` - ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ ĞºĞ»Ğ¸ĞºĞ°
- âœ… `competition` - ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ†Ğ¸Ñ (0-1)
- âœ… `keyword_difficulty` - ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ (0-100)

**Ğ•ÑĞ»Ğ¸ Ğ±Ñ‹ Ğ½ÑƒĞ¶ĞµĞ½ Ğ±Ñ‹Ğ» Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ:**
```typescript
// ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´ (Ğ½Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ² Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸)
const metricsData = await getKeywordsData({
  keywords: ["yacht charter", "boat rental", ...],
  language_code: "ru",
  location_code: 2643,
});
```

### âœ… Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:
Ğ’ÑĞµ 150+ keywords Ğ¸Ğ¼ĞµÑÑ‚ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸.

---

## <a name="ÑˆĞ°Ğ³-5"></a>Ğ¨ĞĞ“ 5: SERP Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¸ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ intent

### ğŸ”„ Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚:

**Ğ¤Ğ°Ğ¹Ğ»:** `lib/dataforseo/labs-client.ts` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 437-462)

### 5.1. Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ñ‚Ğ¾Ğ¿-20 keywords Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°

```typescript
// Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¿Ğ¾ search volume, Ğ±ĞµÑ€ĞµĞ¼ Ñ‚Ğ¾Ğ¿-20
const sortedKeywords = Array.from(allKeywords.values())
  .sort((a, b) => b.search_volume - a.search_volume);

const topKeywords = sortedKeywords.slice(0, 20);
```

**Ğ¢Ğ¾Ğ¿-20 keywords:**
```
1. yacht charter mediterranean (SV: 8900)
2. boat rental prices (SV: 5400)
3. sailing vacation greece (SV: 3200)
...
20. private yacht charter (SV: 820)
```

---

### 5.2. SERP Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¸Ğ· Ñ‚Ğ¾Ğ¿-20

**Ğ¦Ğ¸ĞºĞ» Ğ¿Ğ¾ Ñ‚Ğ¾Ğ¿-20 (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 445-462):**
```typescript
for (const kwData of topKeywords) {
  try {
    // SERP Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
    const serpData = await getSerpAdvancedForIntent({
      keyword: kwData.keyword,
      language_code: "ru",
      location_code: 2643,
    });
    
    // ĞĞ½Ğ°Ğ»Ğ¸Ğ· intent
    const intent = analyzeKeywordIntent(serpData);
    kwData.intent = intent;
    
    // Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° 300ms (Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ rate limit)
    await new Promise(resolve => setTimeout(resolve, 300));
  } catch (error) {
    console.error(`Failed to analyze intent for "${kwData.keyword}"`);
    // ĞÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ñ‹Ğ¹ intent = INFORMATIONAL
  }
}
```

---

### 5.3. DataForSEO SERP Request

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ´Ğ»Ñ keyword "yacht charter mediterranean":**

```http
POST https://api.dataforseo.com/v3/serp/google/organic/live/advanced

[{
  "keyword": "yacht charter mediterranean",
  "language_code": "ru",
  "location_code": 2643,
  "device": "desktop",
  "os": "windows",
  "depth": 10,
  "calculate_rectangles": false
}]
```

**SERP Response:**
```json
{
  "tasks": [{
    "result": [{
      "items": [
        {
          "type": "organic",
          "rank_group": 1,
          "title": "Mediterranean Yacht Charter Guide 2026",
          "url": "https://yachtworld.com/mediterranean-charter",
          "domain": "yachtworld.com"
        },
        {
          "type": "people_also_ask",
          "items": [
            {"question": "How much does a yacht charter cost?"},
            {"question": "What is included in yacht charter?"}
          ]
        }
      ],
      "item_types": ["organic", "people_also_ask", "featured_snippet"]
    }]
  }]
}
```

---

### 5.4. ĞĞ½Ğ°Ğ»Ğ¸Ğ· intent

**Ğ¤Ğ°Ğ¹Ğ»:** `lib/dataforseo/labs-client.ts` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 229-309)

```typescript
function analyzeKeywordIntent(serpData: any): KeywordIntent {
  const result = serpData.tasks[0].result?.[0];
  const items = result.items || [];
  const itemTypes = result.item_types || [];
  
  // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ SERP features
  const hasPAA = itemTypes.includes('people_also_ask');
  const hasFeaturedSnippet = itemTypes.includes('featured_snippet');
  const hasShoppingResults = itemTypes.includes('shopping');
  const hasLocalPack = itemTypes.includes('local_pack');
  
  // ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¾Ğ² Ñ‚Ğ¾Ğ¿-10
  const topTitles = items
    .filter(item => item.type === 'organic')
    .slice(0, 10)
    .map(item => item.title.toLowerCase());
  
  // Transactional signals
  const transactionalWords = ['buy', 'price', 'shop', 'ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒ', 'Ñ†ĞµĞ½Ğ°'];
  const hasTransactional = topTitles.some(title =>
    transactionalWords.some(word => title.includes(word))
  );
  
  // Commercial signals
  const commercialWords = ['best', 'review', 'comparison', 'Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹', 'Ğ¾Ğ±Ğ·Ğ¾Ñ€'];
  const hasCommercial = topTitles.some(title =>
    commercialWords.some(word => title.includes(word))
  );
  
  // Informational signals
  const informationalWords = ['how', 'what', 'guide', 'ĞºĞ°Ğº', 'Ñ‡Ñ‚Ğ¾', 'Ğ³Ğ°Ğ¹Ğ´'];
  const hasInformational = topTitles.some(title =>
    informationalWords.some(word => title.includes(word))
  );
  
  // ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
  if (hasShoppingResults || hasTransactional) {
    return KeywordIntent.TRANSACTIONAL;
  }
  if (hasLocalPack) {
    return KeywordIntent.LOCAL;
  }
  if (hasCommercial) {
    return KeywordIntent.COMMERCIAL;
  }
  if (hasPAA || hasFeaturedSnippet || hasInformational) {
    return KeywordIntent.INFORMATIONAL;
  }
  
  return KeywordIntent.INFORMATIONAL; // default
}
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°:**
```javascript
// "yacht charter mediterranean"
{
  hasPAA: true,
  hasFeaturedSnippet: true,
  hasShoppingResults: false,
  topTitles: ["mediterranean yacht charter guide 2026", "how to charter..."],
  hasInformational: true,
  
  => intent: INFORMATIONAL
}

// "boat rental prices"
{
  hasTransactional: true, // "prices" Ğ² Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ°Ñ…
  topTitles: ["yacht charter prices 2026", "boat rental cost calculator"],
  
  => intent: COMMERCIAL
}
```

### âœ… Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¨Ğ°Ğ³Ğ° 5:
```javascript
Ğ¢Ğ¾Ğ¿-20 keywords Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğ¼ intent:
{
  keyword: "yacht charter mediterranean",
  search_volume: 8900,
  intent: INFORMATIONAL, // âœ… Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾
  ...
}
{
  keyword: "boat rental prices",
  search_volume: 5400,
  intent: COMMERCIAL, // âœ… Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾
  ...
}

ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ 130 keywords:
  intent: INFORMATIONAL // default (Ğ½Ğµ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ»Ğ¸ Ğ´Ğ»Ñ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ğ¸)
```

**Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ:**
- 20 SERP Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ã— $0.0006 = $0.012
- ĞĞ±Ñ‰ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ: ~6 ÑĞµĞºÑƒĞ½Ğ´ (20 Ã— 300ms Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ°)

---


## <a name="ÑˆĞ°Ğ³-6"></a>Ğ¨ĞĞ“ 6: ĞšĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (DBSCAN)

### ğŸ”„ Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚:

**Ğ¤Ğ°Ğ¹Ğ»:** `app/api/seo/semantic-cluster/route.ts` (ÑÑ‚Ñ€Ğ¾ĞºĞ° 121)

```typescript
// ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞµĞ¼ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
const clusteredData = clusterKeywordsFull(filteredKeywords);
```

**Ğ¤Ğ°Ğ¹Ğ»:** `lib/dataforseo/clustering.ts` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 281-334)

---

### 6.1. Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ intent

```typescript
// Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¿Ğ¾ intent
const byIntent = groupByIntent(keywords);

Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:
Map {
  INFORMATIONAL => [85 keywords],
  COMMERCIAL => [35 keywords],
  TRANSACTIONAL => [20 keywords],
  LOCAL => [10 keywords],
  NAVIGATIONAL => [0 keywords]
}
```

---

### 6.2. Ğ¡ĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (DBSCAN)

**ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 187-276):**

#### Ğ¨Ğ°Ğ³ 6.2.1: Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ TF-IDF Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²

```typescript
// Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 207-208
const keywordStrings = keywords.map(kw => kw.keyword);
const tfidfVectors = calculateTfIdf(keywordStrings);
```

**ĞŸÑ€Ğ¾Ñ†ĞµÑÑ:**
```javascript
// 1. Tokenization
"yacht charter mediterranean" => ["yacht", "charter", "mediterranean"]
"boat rental prices" => ["boat", "rental", "prices"]
"sailing vacation greece" => ["sailing", "vacation", "greece"]

// 2. TF-IDF Ñ€Ğ°ÑÑ‡ĞµÑ‚
Vocabulary: ["yacht", "charter", "mediterranean", "boat", "rental", ...]

TF-IDF Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ñ‹:
"yacht charter mediterranean" => [0.85, 0.92, 0.67, 0, 0, ...]
"boat rental prices" => [0, 0, 0, 0.78, 0.81, ...]
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ calculateTfIdf (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 21-67):**
```typescript
function calculateTfIdf(documents: string[]): Map<string, number[]> {
  // 1. Tokenize Ğ²ÑĞµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹
  const tokenizedDocs = documents.map(doc => tokenize(doc));
  
  // 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ vocabulary (Ğ²ÑĞµ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹)
  const vocabulary = Array.from(allTokens);
  
  // 3. Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ IDF Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ñ‚Ğ¾ĞºĞµĞ½Ğ°
  const idf = new Map<string, number>();
  vocabulary.forEach(token => {
    const docsWithToken = tokenizedDocs.filter(tokens => 
      tokens.includes(token)
    ).length;
    idf.set(token, Math.log((documents.length + 1) / (docsWithToken + 1)));
  });
  
  // 4. Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ TF-IDF Ğ²ĞµĞºÑ‚Ğ¾Ñ€ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
  documents.forEach((doc, docIdx) => {
    const tokens = tokenizedDocs[docIdx];
    const vector = new Array(vocabulary.length).fill(0);
    
    tokens.forEach(token => {
      const tf = count / tokens.length;
      const idfValue = idf.get(token);
      vector[idx] = tf * idfValue;
    });
    
    tfidfVectors.set(doc, vector);
  });
  
  return tfidfVectors;
}
```

---

#### Ğ¨Ğ°Ğ³ 6.2.2: ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ DBSCAN

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
```typescript
eps = 0.3 // CLUSTERING_SIMILARITY_THRESHOLD (cosine similarity)
minPts = 3 // MIN_CLUSTER_SIZE (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 3 ĞºĞ»ÑÑ‡Ğ° Ğ² ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğµ)
```

**ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ DBSCAN (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 92-162):**

```typescript
function dbscan(keywords, tfidfVectors, eps=0.3, minPts=3) {
  const assignments = new Map(); // keyword -> cluster_id
  let clusterId = 0;
  
  // Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğ³Ğ¾ ÑĞ»Ğ¾Ğ²Ğ°
  keywords.forEach(keyword => {
    if (visited.has(keyword)) return;
    
    // ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ğ¼ ÑĞ¾ÑĞµĞ´ĞµĞ¹ (similarity >= 0.3)
    const neighbors = getNeighbors(keyword);
    
    if (neighbors.length < 3) {
      assignments.set(keyword, -1); // noise (Ğ½Ğµ Ğ¿Ğ¾Ğ¿Ğ°Ğ» Ğ² ĞºĞ»Ğ°ÑÑ‚ĞµÑ€)
    } else {
      // Ğ Ğ°ÑÑˆĞ¸Ñ€ÑĞµĞ¼ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€
      expandCluster(keyword, neighbors, clusterId);
      clusterId++;
    }
  });
  
  return assignments;
}
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹:**

```javascript
Keyword: "yacht charter mediterranean"
TF-IDF: [0.85, 0.92, 0.67, 0, 0, ...]

ĞŸĞ¾Ğ¸ÑĞº ÑĞ¾ÑĞµĞ´ĞµĞ¹:
  "yacht charter greece" => cosine_similarity = 0.82 âœ… (>= 0.3)
  "luxury yacht charter" => cosine_similarity = 0.74 âœ…
  "yacht charter cost" => cosine_similarity = 0.68 âœ…
  "yacht rental mediterranean" => cosine_similarity = 0.61 âœ…
  "boat rental prices" => cosine_similarity = 0.12 âŒ (< 0.3)
  
Ğ¡Ğ¾ÑĞµĞ´ĞµĞ¹: 4 (>= minPts=3) => ÑĞ¾Ğ·Ğ´Ğ°ĞµĞ¼ Cluster #0

Cluster #0: [
  "yacht charter mediterranean",
  "yacht charter greece",
  "luxury yacht charter",
  "yacht charter cost",
  "yacht rental mediterranean"
]
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ DBSCAN:**
```javascript
assignments Map {
  "yacht charter mediterranean" => 0,
  "yacht charter greece" => 0,
  "luxury yacht charter" => 0,
  "boat rental prices" => 1,
  "boat rental cost" => 1,
  "sailing vacation greece" => 2,
  "sailing holiday mediterranean" => 2,
  "catamaran rental" => -1, // noise (Ğ¼Ğ°Ğ»Ğ¾ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ…)
  ...
}

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¾ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²: 12
Noise keywords: 8
```

---

#### Ğ¨Ğ°Ğ³ 6.2.3: Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²

**ĞšĞ¾Ğ´ (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 230-276):**

```typescript
const clusters = [];

clusterMap.forEach((clusterKeywords, clusterId) => {
  if (clusterId === -1) return; // Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ noise
  
  // Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¿Ğ¾ search volume
  clusterKeywords.sort((a, b) => b.search_volume - a.search_volume);
  
  // ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°
  const totalSearchVolume = clusterKeywords.reduce(
    (sum, kw) => sum + kw.search_volume, 0
  );
  
  const avgKeywordDifficulty = clusterKeywords.reduce(
    (sum, kw) => sum + kw.keyword_difficulty, 0
  ) / clusterKeywords.length;
  
  // Ğ”Ğ¾Ğ¼Ğ¸Ğ½Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ğ¹ intent
  const intentCounts = new Map();
  clusterKeywords.forEach(kw => {
    intentCounts.set(kw.intent, (intentCounts.get(kw.intent) || 0) + 1);
  });
  const dominantIntent = Array.from(intentCounts.entries())
    .sort((a, b) => b[1] - a[1])[0][0];
  
  // ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ = ÑĞ°Ğ¼Ğ¾Ğµ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾Ğµ ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾
  const clusterName = clusterKeywords[0].keyword;
  
  clusters.push({
    cluster_id: clusterId,
    cluster_name: clusterName,
    keywords: clusterKeywords,
    total_search_volume: totalSearchVolume,
    avg_keyword_difficulty: Math.round(avgKeywordDifficulty),
    dominant_intent: dominantIntent,
  });
});

// Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¿Ğ¾ search volume
clusters.sort((a, b) => b.total_search_volume - a.total_search_volume);
```

---

### âœ… Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¨Ğ°Ğ³Ğ° 6:

**Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ñ‹:**

```javascript
{
  byIntent: Map {
    INFORMATIONAL => [85 keywords],
    COMMERCIAL => [35 keywords],
    TRANSACTIONAL => [20 keywords],
    LOCAL => [10 keywords]
  },
  
  bySemantic: [
    {
      cluster_id: 0,
      cluster_name: "yacht charter mediterranean",
      keywords: [
        {keyword: "yacht charter mediterranean", search_volume: 8900, ...},
        {keyword: "yacht charter greece", search_volume: 4200, ...},
        {keyword: "luxury yacht charter", search_volume: 3100, ...},
        {keyword: "yacht charter cost", search_volume: 2800, ...},
        {keyword: "yacht rental mediterranean", search_volume: 1900, ...}
      ],
      total_search_volume: 20900,
      avg_keyword_difficulty: 44,
      dominant_intent: "INFORMATIONAL"
    },
    {
      cluster_id: 1,
      cluster_name: "boat rental prices",
      keywords: [
        {keyword: "boat rental prices", search_volume: 5400, ...},
        {keyword: "boat rental cost", search_volume: 3200, ...},
        {keyword: "yacht charter prices", search_volume: 2900, ...}
      ],
      total_search_volume: 11500,
      avg_keyword_difficulty: 38,
      dominant_intent: "COMMERCIAL"
    },
    {
      cluster_id: 2,
      cluster_name: "sailing vacation greece",
      keywords: [...],
      total_search_volume: 9800,
      avg_keyword_difficulty: 32,
      dominant_intent: "INFORMATIONAL"
    },
    // ... ĞµÑ‰Ñ‘ 9 ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²
  ],
  
  summary: {
    total_keywords: 150,
    total_search_volume: 245000,
    intent_distribution: {
      INFORMATIONAL: 85,
      COMMERCIAL: 35,
      TRANSACTIONAL: 20,
      LOCAL: 10,
      NAVIGATIONAL: 0
    },
    cluster_count: 12
  }
}
```

---

## <a name="ÑˆĞ°Ğ³-7"></a>Ğ¨ĞĞ“ 7: Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”

### ğŸ”„ Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚:

**Ğ¤Ğ°Ğ¹Ğ»:** `app/api/seo/semantic-cluster/route.ts` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 127-211)

---

### 7.1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ semantic_cluster

```sql
INSERT INTO seo_semantic_clusters (
  user_id,
  project_id,
  name,
  seeds,
  language,
  location_code,
  location_name,
  total_keywords,
  total_search_volume,
  cluster_count,
  status
)
VALUES (
  42, -- user_id
  NULL, -- project_id
  'yacht charter, boat rental, sailing vacation', -- name
  '["yacht charter", "boat rental", "sailing vacation"]', -- seeds JSON
  'ru',
  '2643',
  'Russia',
  150, -- total_keywords
  245000, -- total_search_volume
  12, -- cluster_count
  'completed'
)
RETURNING id;
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```sql
id: 567 (cluster_record_id)
```

---

### 7.2. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²

**Ğ¦Ğ¸ĞºĞ» Ğ¿Ğ¾ 12 ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°Ğ¼ (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 160-182):**

```sql
-- Cluster #0
INSERT INTO seo_clusters (
  semantic_cluster_id,
  cluster_id,
  cluster_name,
  dominant_intent,
  total_search_volume,
  avg_keyword_difficulty,
  keywords_count
)
VALUES (
  567, -- semantic_cluster_id
  0,
  'yacht charter mediterranean',
  'INFORMATIONAL',
  20900,
  44,
  5
)
RETURNING id;
-- Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ cluster_db_id: 1001

-- Cluster #1
INSERT INTO seo_clusters ... -- cluster_db_id: 1002
-- ...
-- Cluster #11
INSERT INTO seo_clusters ... -- cluster_db_id: 1012
```

---

### 7.3. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²

**Ğ’Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 186-209):**

```sql
-- Ğ”Ğ»Ñ Cluster #0 (5 keywords)
INSERT INTO seo_cluster_keywords (
  cluster_id,
  keyword,
  search_volume,
  cpc,
  competition,
  keyword_difficulty,
  intent,
  source
)
VALUES
  (1001, 'yacht charter mediterranean', 8900, 3.45, 0.67, 42, 'INFORMATIONAL', 'labs'),
  (1001, 'yacht charter greece', 4200, 3.12, 0.58, 39, 'INFORMATIONAL', 'labs'),
  (1001, 'luxury yacht charter', 3100, 4.20, 0.72, 51, 'INFORMATIONAL', 'labs'),
  (1001, 'yacht charter cost', 2800, 2.95, 0.54, 38, 'INFORMATIONAL', 'related'),
  (1001, 'yacht rental mediterranean', 1900, 2.80, 0.48, 36, 'INFORMATIONAL', 'related');

-- Ğ”Ğ»Ñ Cluster #1 (3 keywords)
INSERT INTO seo_cluster_keywords ...
  (1002, 'boat rental prices', 5400, ...),
  (1002, 'boat rental cost', 3200, ...),
  (1002, 'yacht charter prices', 2900, ...);

-- ... Ğ´Ğ»Ñ Ğ²ÑĞµÑ… 12 ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ² (150 keywords total)
```

---

### âœ… Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¨Ğ°Ğ³Ğ° 7:

**Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**

```
seo_semantic_clusters:
  id: 567
  name: "yacht charter, boat rental, sailing vacation"
  total_keywords: 150
  total_search_volume: 245000
  cluster_count: 12
  status: "completed"

seo_clusters (12 Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹):
  id: 1001, cluster_name: "yacht charter mediterranean", keywords_count: 5
  id: 1002, cluster_name: "boat rental prices", keywords_count: 3
  id: 1003, cluster_name: "sailing vacation greece", keywords_count: 4
  ...
  id: 1012, cluster_name: "catamaran charter", keywords_count: 7

seo_cluster_keywords (150 Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹):
  cluster_id: 1001, keyword: "yacht charter mediterranean", sv: 8900
  cluster_id: 1001, keyword: "yacht charter greece", sv: 4200
  ...
  cluster_id: 1012, keyword: "catamaran charter malta", sv: 850
```

---


## <a name="ÑˆĞ°Ğ³-8"></a>Ğ¨ĞĞ“ 8: Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ

### ğŸ”„ Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚:

**Ğ¤Ğ°Ğ¹Ğ»:** `app/api/seo/semantic-cluster/route.ts` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 214-240)

```typescript
// Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¾Ñ‚Ğ²ĞµÑ‚
return NextResponse.json({
  success: true,
  cluster_id: 567, // clusterRecordId
  summary: {
    total_keywords: 150,
    total_found: 180, // Ğ±Ñ‹Ğ»Ğ¾ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ¿ĞµÑ€ĞµĞ´ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹
    total_search_volume: 245000,
    cluster_count: 12,
    intent_distribution: {
      INFORMATIONAL: 85,
      COMMERCIAL: 35,
      TRANSACTIONAL: 20,
      LOCAL: 10,
      NAVIGATIONAL: 0
    },
    processing_time_ms: 8450 // ~8.5 ÑĞµĞºÑƒĞ½Ğ´
  },
  clusters: [
    {
      cluster_id: 0,
      cluster_name: "yacht charter mediterranean",
      keywords_count: 5,
      total_search_volume: 20900,
      avg_keyword_difficulty: 44,
      dominant_intent: "INFORMATIONAL",
      top_keywords: [
        {keyword: "yacht charter mediterranean", search_volume: 8900, cpc: 3.45},
        {keyword: "yacht charter greece", search_volume: 4200, cpc: 3.12},
        {keyword: "luxury yacht charter", search_volume: 3100, cpc: 4.20},
        {keyword: "yacht charter cost", search_volume: 2800, cpc: 2.95},
        {keyword: "yacht rental mediterranean", search_volume: 1900, cpc: 2.80}
      ]
    },
    {
      cluster_id: 1,
      cluster_name: "boat rental prices",
      keywords_count: 3,
      total_search_volume: 11500,
      avg_keyword_difficulty: 38,
      dominant_intent: "COMMERCIAL",
      top_keywords: [...]
    },
    // ... ĞµÑ‰Ñ‘ 10 ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²
  ]
});
```

---

### ğŸ“¡ HTTP Response:

```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "success": true,
  "cluster_id": 567,
  "summary": {
    "total_keywords": 150,
    "total_found": 180,
    "total_search_volume": 245000,
    "cluster_count": 12,
    "intent_distribution": {
      "INFORMATIONAL": 85,
      "COMMERCIAL": 35,
      "TRANSACTIONAL": 20,
      "LOCAL": 10,
      "NAVIGATIONAL": 0
    },
    "processing_time_ms": 8450
  },
  "clusters": [...]
}
```

---

### ğŸ‘¤ ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:

**Ğ¤Ğ°Ğ¹Ğ»:** `components/SemanticClusterForm.tsx` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 124-136)

```typescript
const data = await response.json();

if (data.success) {
  toast.success(`âœ… Ğ¡Ğ¾Ğ±Ñ€Ğ°Ğ½Ğ¾ ${data.summary.total_keywords} ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²!`);
  onSuccess(data.cluster_id); // Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ callback Ñ cluster_id
  onClose(); // Ğ·Ğ°ĞºÑ€Ñ‹Ğ²Ğ°ĞµĞ¼ Ñ„Ğ¾Ñ€Ğ¼Ñƒ
} else {
  toast.error(data.error);
}
```

---

### ğŸ¨ UI Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ:

**Ğ¤Ğ°Ğ¹Ğ»:** `app/(dashboard)/seo/page.tsx` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 361-364)

```typescript
const handleClusterSuccess = (clusterId: number) => {
  setShowClusterForm(false);
  setClusterId(clusterId); // ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ cluster_id
  loadClusters(); // Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ ÑĞ¿Ğ¸ÑĞ¾Ğº ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²
};
```

**ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ²Ğ¸Ğ´Ğ¸Ñ‚:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… Ğ¡Ğ¾Ğ±Ñ€Ğ°Ğ½Ğ¾ 150 ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²!                      â”‚
â”‚                                                    â”‚
â”‚ ğŸ“Š Ğ¡ĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ñ‹                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ID â”‚ ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ                â”‚ KW  â”‚ SV     â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚567 â”‚yacht charter, boat...   â”‚ 150 â”‚ 245k   â”‚  â”‚
â”‚ â”‚    â”‚âœ¨ Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡Ñ‚Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ğ½     â”‚     â”‚        â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ [ğŸ‘ï¸ ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€] [ğŸ“Š Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ] [ğŸ“¥ Export CSV] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## <a name="ÑˆĞ°Ğ³-9"></a>Ğ¨ĞĞ“ 9: ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¸ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²

### 9.1. ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°

**ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ğŸ‘ï¸ ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€"**

**Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ:**
```http
GET /api/seo/semantic-cluster/567
```

**Ğ¤Ğ°Ğ¹Ğ»:** `app/api/seo/semantic-cluster/[id]/route.ts` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 11-108)

```sql
-- ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°
SELECT 
  sc.*,
  p.name as project_name,
  c.id as cluster_id,
  c.cluster_name,
  c.dominant_intent,
  c.total_search_volume as cluster_sv,
  c.keywords_count,
  ck.keyword,
  ck.search_volume,
  ck.cpc,
  ck.competition,
  ck.keyword_difficulty,
  ck.intent,
  ck.source
FROM seo_semantic_clusters sc
LEFT JOIN projects p ON sc.project_id = p.id
LEFT JOIN seo_clusters c ON sc.id = c.semantic_cluster_id
LEFT JOIN seo_cluster_keywords ck ON c.id = ck.cluster_id
WHERE sc.id = 567 AND sc.user_id = 42
ORDER BY c.cluster_id, ck.search_volume DESC;
```

**Response:**
```json
{
  "success": true,
  "cluster": {
    "id": 567,
    "name": "yacht charter, boat rental, sailing vacation",
    "seeds": ["yacht charter", "boat rental", "sailing vacation"],
    "language": "ru",
    "location_name": "Russia",
    "total_keywords": 150,
    "total_search_volume": 245000,
    "cluster_count": 12,
    "status": "completed",
    "created_at": "2026-02-28T14:30:00Z"
  },
  "clusters": [
    {
      "cluster_id": 0,
      "cluster_name": "yacht charter mediterranean",
      "dominant_intent": "INFORMATIONAL",
      "total_search_volume": 20900,
      "keywords_count": 5,
      "keywords": [
        {
          "keyword": "yacht charter mediterranean",
          "search_volume": 8900,
          "cpc": 3.45,
          "competition": 0.67,
          "keyword_difficulty": 42,
          "intent": "INFORMATIONAL",
          "source": "labs"
        },
        // ... Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ 4 keywords
      ]
    },
    // ... Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ 11 ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²
  ]
}
```

---

### ğŸ¨ UI Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ĞšĞ»Ğ°ÑÑ‚ĞµÑ€: yacht charter, boat rental, sailing vacation    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Seeds: yacht charter, boat rental, sailing vacation          â”‚
â”‚ Ğ¯Ğ·Ñ‹Ğº: Ğ ÑƒÑÑĞºĞ¸Ğ¹ | Ğ ĞµĞ³Ğ¸Ğ¾Ğ½: Russia                              â”‚
â”‚ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½: 28.02.2026 14:30                                     â”‚
â”‚                                                              â”‚
â”‚ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°:                                                  â”‚
â”‚ â€¢ Ğ’ÑĞµĞ³Ğ¾ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²: 150                                   â”‚
â”‚ â€¢ ĞĞ±Ñ‰Ğ¸Ğ¹ search volume: 245,000/Ğ¼ĞµÑÑÑ†                         â”‚
â”‚ â€¢ Ğ¡ĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²: 12                                â”‚
â”‚                                                              â”‚
â”‚ Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ intent:                                     â”‚
â”‚ â€¢ INFORMATIONAL: 85 (57%)                                    â”‚
â”‚ â€¢ COMMERCIAL: 35 (23%)                                       â”‚
â”‚ â€¢ TRANSACTIONAL: 20 (13%)                                    â”‚
â”‚ â€¢ LOCAL: 10 (7%)                                             â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ĞšĞ»Ğ°ÑÑ‚ĞµÑ€ #0: yacht charter mediterranean                 â”‚ â”‚
â”‚ â”‚ Intent: INFORMATIONAL | SV: 20,900 | KD: 44 | KW: 5     â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ â€¢ yacht charter mediterranean (SV: 8900, CPC: $3.45)     â”‚ â”‚
â”‚ â”‚ â€¢ yacht charter greece (SV: 4200, CPC: $3.12)            â”‚ â”‚
â”‚ â”‚ â€¢ luxury yacht charter (SV: 3100, CPC: $4.20)            â”‚ â”‚
â”‚ â”‚ â€¢ yacht charter cost (SV: 2800, CPC: $2.95)              â”‚ â”‚
â”‚ â”‚ â€¢ yacht rental mediterranean (SV: 1900, CPC: $2.80)      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ĞšĞ»Ğ°ÑÑ‚ĞµÑ€ #1: boat rental prices                          â”‚ â”‚
â”‚ â”‚ Intent: COMMERCIAL | SV: 11,500 | KD: 38 | KW: 3        â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ â€¢ boat rental prices (SV: 5400, CPC: $2.80)              â”‚ â”‚
â”‚ â”‚ â€¢ boat rental cost (SV: 3200, CPC: $2.50)                â”‚ â”‚
â”‚ â”‚ â€¢ yacht charter prices (SV: 2900, CPC: $3.10)            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚ [... ĞµÑ‰Ñ‘ 10 ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ² ...]                                  â”‚
â”‚                                                              â”‚
â”‚ [ğŸ“¥ Export CSV] [ğŸ“Š Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ] [ğŸ—‘ï¸ Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 9.2. Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ² CSV

**ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ğŸ“¥ Export CSV"**

**Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ:**
```http
GET /api/seo/semantic-cluster/567/export
```

**Ğ¤Ğ°Ğ¹Ğ»:** `app/api/seo/semantic-cluster/[id]/export/route.ts`

```typescript
export async function GET(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ° (Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾ ÑˆĞ°Ğ³Ñƒ 9.1)
  const { cluster, clusters } = await getClusterDetails(params.id);
  
  // Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼ CSV
  const csv = exportClustersToCSV(clusters);
  
  // Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ Ñ„Ğ°Ğ¹Ğ»
  return new NextResponse(csv, {
    headers: {
      'Content-Type': 'text/csv',
      'Content-Disposition': `attachment; filename="semantic-cluster-${params.id}.csv"`
    }
  });
}
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ exportClustersToCSV:**

**Ğ¤Ğ°Ğ¹Ğ»:** `lib/dataforseo/clustering.ts` (ÑÑ‚Ñ€Ğ¾ĞºĞ¸ 339-365)

```typescript
export function exportClustersToCSV(clusters) {
  const lines = [];
  
  // Header
  lines.push('Cluster ID,Cluster Name,Keyword,Search Volume,CPC,Competition,Keyword Difficulty,Intent,Source');
  
  // Data
  clusters.forEach(cluster => {
    cluster.keywords.forEach(kw => {
      lines.push([
        cluster.cluster_id,
        `"${cluster.cluster_name}"`,
        `"${kw.keyword}"`,
        kw.search_volume,
        kw.cpc?.toFixed(2) || 0,
        kw.competition?.toFixed(2) || 0,
        kw.keyword_difficulty || 0,
        kw.intent,
        kw.source || 'unknown'
      ].join(','));
    });
  });
  
  return lines.join('\n');
}
```

**Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ CSV Ñ„Ğ°Ğ¹Ğ»:**

```csv
Cluster ID,Cluster Name,Keyword,Search Volume,CPC,Competition,Keyword Difficulty,Intent,Source
0,"yacht charter mediterranean","yacht charter mediterranean",8900,3.45,0.67,42,INFORMATIONAL,labs
0,"yacht charter mediterranean","yacht charter greece",4200,3.12,0.58,39,INFORMATIONAL,labs
0,"yacht charter mediterranean","luxury yacht charter",3100,4.20,0.72,51,INFORMATIONAL,labs
0,"yacht charter mediterranean","yacht charter cost",2800,2.95,0.54,38,INFORMATIONAL,related
0,"yacht charter mediterranean","yacht rental mediterranean",1900,2.80,0.48,36,INFORMATIONAL,related
1,"boat rental prices","boat rental prices",5400,2.80,0.62,35,COMMERCIAL,labs
1,"boat rental prices","boat rental cost",3200,2.50,0.58,33,COMMERCIAL,labs
1,"boat rental prices","yacht charter prices",2900,3.10,0.65,40,COMMERCIAL,related
2,"sailing vacation greece","sailing vacation greece",3200,2.10,0.45,30,INFORMATIONAL,labs
...
(150 ÑÑ‚Ñ€Ğ¾Ğº total)
```

---

### ğŸ“¥ ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ñ„Ğ°Ğ¹Ğ»:

```
Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚:
semantic-cluster-567.csv (15 KB)

ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ² Excel/Google Sheets:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Cluster â”‚Cluster Name              â”‚Keyword                   â”‚SV   â”‚CPC   â”‚Comp  â”‚KD  â”‚Intent        â”‚Source  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚0       â”‚yacht charter mediterraneanâ”‚yacht charter mediterraneanâ”‚8900 â”‚3.45  â”‚0.67  â”‚42  â”‚INFORMATIONAL â”‚labs    â”‚
â”‚0       â”‚yacht charter mediterraneanâ”‚yacht charter greece      â”‚4200 â”‚3.12  â”‚0.58  â”‚39  â”‚INFORMATIONAL â”‚labs    â”‚
â”‚...     â”‚...                       â”‚...                       â”‚...  â”‚...   â”‚...   â”‚... â”‚...           â”‚...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ĞŸĞĞ›ĞĞĞ¯ Ğ¡Ğ¢ĞĞ¢Ğ˜Ğ¡Ğ¢Ğ˜ĞšĞ ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡Ğ

### â±ï¸ Ğ’Ñ€ĞµĞ¼Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ:
```
Ğ¨Ğ°Ğ³ 1: Ğ’Ğ²Ğ¾Ğ´ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…                         ~30 ÑĞµĞº (Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ²Ğ²Ğ¾Ğ´)
Ğ¨Ğ°Ğ³ 2: ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°                    ~100 Ğ¼Ñ
Ğ¨Ğ°Ğ³ 3: Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ keywords (DataForSEO)    ~2-3 ÑĞµĞº
  - Labs Keywords for Keywords              1.2 ÑĞµĞº
  - Related Keywords (3 seeds)              0.9 ÑĞµĞº
  - Keywords for Site (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)         1.0 ÑĞµĞº
Ğ¨Ğ°Ğ³ 4: ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸                              0 ÑĞµĞº (ÑƒĞ¶Ğµ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ñ‹ Ğ² ÑˆĞ°Ğ³ 3)
Ğ¨Ğ°Ğ³ 5: SERP Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· (Ñ‚Ğ¾Ğ¿-20)                 ~6 ÑĞµĞº
  - 20 SERP Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ã— 300ms                6.0 ÑĞµĞº
Ğ¨Ğ°Ğ³ 6: ĞšĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (DBSCAN)               ~0.5 ÑĞµĞº
  - TF-IDF Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ñ‹                          0.2 ÑĞµĞº
  - DBSCAN Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼                         0.3 ÑĞµĞº
Ğ¨Ğ°Ğ³ 7: Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”                      ~0.5 ÑĞµĞº
  - INSERT semantic_cluster                 0.05 ÑĞµĞº
  - INSERT 12 clusters                      0.15 ÑĞµĞº
  - INSERT 150 keywords                     0.3 ÑĞµĞº
Ğ¨Ğ°Ğ³ 8: Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°                  ~0.1 ÑĞµĞº

Ğ˜Ğ¢ĞĞ“Ğ: ~9-10 ÑĞµĞºÑƒĞ½Ğ´ (Ğ±ĞµĞ· Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ğ²Ğ¾Ğ´Ğ°)
```

---

### ğŸ’° Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹:

```
DataForSEO API:
  Labs Keywords for Keywords    $0.10 per 1000 results
    100 keywords                 = $0.010
  
  Related Keywords (3 seeds)     $0.10 per 1000 results
    3 Ã— 30 keywords = 90         = $0.009
  
  Keywords for Site              $0.50 per 1000 results
    50 keywords                  = $0.025
  
  SERP Organic Advanced (20)     $0.60 per 1000 requests
    20 requests                  = $0.012

TOTAL: ~$0.056 (5.6 Ñ†ĞµĞ½Ñ‚Ğ¾Ğ² Ğ·Ğ° ÑĞµĞ¼ĞºĞ»Ğ°ÑÑ‚ĞµÑ€ Ğ¸Ğ· 150 keywords)

Ğ¡ Ğ±ÑƒÑ„ĞµÑ€Ğ¾Ğ¼: $0.10-0.50 Ğ² Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¾Ñ‚ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ°
```

---

### ğŸ“¦ Ğ§Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ» ĞºĞ»Ğ¸ĞµĞ½Ñ‚:

```javascript
âœ… 150 ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ² Ñ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¼Ğ¸ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ°Ğ¼Ğ¸:
   - search_volume (Ğ¾Ğ±ÑŠĞµĞ¼ Ğ¿Ğ¾Ğ¸ÑĞºĞ°)
   - cpc (ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ ĞºĞ»Ğ¸ĞºĞ°)
   - competition (ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ†Ğ¸Ñ)
   - keyword_difficulty (ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ)
   - intent (INFORMATIONAL/COMMERCIAL/TRANSACTIONAL/LOCAL)
   - source (labs/related/competitor/seed)

âœ… 12 ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²:
   - Ğ¡Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ¿Ğ¾ ÑĞ¼Ñ‹ÑĞ»Ñƒ (DBSCAN)
   - Ğ¡ Ğ´Ğ¾Ğ¼Ğ¸Ğ½Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ğ¼ intent
   - Ğ¡ Ğ¾Ğ±Ñ‰Ğ¸Ğ¼Ğ¸ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ°Ğ¼Ğ¸ (total SV, avg KD)

âœ… Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°:
   - Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ intent
   - ĞĞ±Ñ‰Ğ¸Ğ¹ search volume: 245,000/Ğ¼ĞµÑÑÑ†
   - Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ keyword difficulty

âœ… Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:
   - ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ² UI
   - Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ² CSV
   - Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²
   - Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ
   - ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·
```

---

## ğŸ”„ Ğ¡Ğ¥Ğ•ĞœĞ ĞŸĞĞ›ĞĞĞ“Ğ FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ĞšĞ›Ğ˜Ğ•ĞĞ¢ (Browser)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 1. ĞÑ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ñƒ, Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ 3 seeds
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SemanticClusterForm.tsx                            â”‚
â”‚  [yacht charter] [boat rental] [sailing vacation]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 2. POST /api/seo/semantic-cluster
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           app/api/seo/semantic-cluster/route.ts                 â”‚
â”‚   â€¢ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° auth (session, userId)                            â”‚
â”‚   â€¢ Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ (min 3 seeds)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 3. buildSemanticCluster()
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              lib/dataforseo/labs-client.ts                      â”‚
â”‚                                                                 â”‚
â”‚  3.1. getLabsKeywordsForKeywords()                             â”‚
â”‚       â””â”€> DataForSEO Labs API                                  â”‚
â”‚           â””â”€> Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: 100 keywords                          â”‚
â”‚                                                                 â”‚
â”‚  3.2. getLabsRelatedKeywords() (Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ seed)             â”‚
â”‚       â””â”€> DataForSEO Labs API Ã— 3                             â”‚
â”‚           â””â”€> Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: +90 keywords                          â”‚
â”‚                                                                 â”‚
â”‚  3.3. getLabsKeywordsForSite() (ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚)          â”‚
â”‚       â””â”€> DataForSEO Labs API                                  â”‚
â”‚           â””â”€> Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: +50 keywords                          â”‚
â”‚                                                                 â”‚
â”‚  Ğ˜Ğ¢ĞĞ“Ğ: 150+ keywords Ñ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ°Ğ¼Ğ¸ (SV, CPC, KD)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 5. ĞĞ½Ğ°Ğ»Ğ¸Ğ· intent Ğ´Ğ»Ñ Ñ‚Ğ¾Ğ¿-20
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              lib/dataforseo/labs-client.ts                      â”‚
â”‚                                                                 â”‚
â”‚  Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¸Ğ· Ñ‚Ğ¾Ğ¿-20 keywords:                               â”‚
â”‚    5.1. getSerpAdvancedForIntent()                             â”‚
â”‚         â””â”€> DataForSEO SERP API                                â”‚
â”‚             â””â”€> SERP features (PAA, snippets, shopping)        â”‚
â”‚                                                                 â”‚
â”‚    5.2. analyzeKeywordIntent()                                 â”‚
â”‚         â””â”€> ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¾Ğ², URL, SERP features             â”‚
â”‚             â””â”€> ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ intent (5 Ñ‚Ğ¸Ğ¿Ğ¾Ğ²)                   â”‚
â”‚                                                                 â”‚
â”‚  Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: 20 keywords Ñ Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ğ¼ intent                        â”‚
â”‚  ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ 130: default INFORMATIONAL                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 6. ĞšĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              lib/dataforseo/clustering.ts                       â”‚
â”‚                                                                 â”‚
â”‚  6.1. calculateTfIdf()                                         â”‚
â”‚       â””â”€> Ğ¢Ğ¾ĞºĞµĞ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ keywords                                 â”‚
â”‚       â””â”€> Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ TF-IDF Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²                           â”‚
â”‚                                                                 â”‚
â”‚  6.2. dbscan()                                                 â”‚
â”‚       â””â”€> Cosine similarity Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ°Ğ¼Ğ¸                    â”‚
â”‚       â””â”€> Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° (eps=0.3, minPts=3)                      â”‚
â”‚                                                                 â”‚
â”‚  6.3. Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²                                   â”‚
â”‚       â””â”€> 12 ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²                           â”‚
â”‚       â””â”€> ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (total SV, avg KD, dominant intent)         â”‚
â”‚                                                                 â”‚
â”‚  Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: 12 clusters Ã— ~12 keywords ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 7. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PostgreSQL Database                          â”‚
â”‚                                                                 â”‚
â”‚  7.1. INSERT seo_semantic_clusters                             â”‚
â”‚       â””â”€> id: 567, total_keywords: 150, status: 'completed'    â”‚
â”‚                                                                 â”‚
â”‚  7.2. INSERT seo_clusters (12 Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹)                         â”‚
â”‚       â””â”€> cluster_id 0-11 Ğ´Ğ»Ñ semantic_cluster_id=567         â”‚
â”‚                                                                 â”‚
â”‚  7.3. INSERT seo_cluster_keywords (150 Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹)                â”‚
â”‚       â””â”€> Ğ’ÑĞµ keywords Ñ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ°Ğ¼Ğ¸                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 8. Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           app/api/seo/semantic-cluster/route.ts                 â”‚
â”‚                                                                 â”‚
â”‚  return NextResponse.json({                                    â”‚
â”‚    success: true,                                              â”‚
â”‚    cluster_id: 567,                                            â”‚
â”‚    summary: {...},                                             â”‚
â”‚    clusters: [...]                                             â”‚
â”‚  })                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ HTTP 200 OK + JSON
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SemanticClusterForm.tsx                            â”‚
â”‚  toast.success("âœ… Ğ¡Ğ¾Ğ±Ñ€Ğ°Ğ½Ğ¾ 150 ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²!")                â”‚
â”‚  onSuccess(567) â†’ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¿Ğ¸ÑĞºĞ° ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ 9. ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   UI (app/seo/page.tsx)                         â”‚
â”‚                                                                 â”‚
â”‚  ĞĞ¿Ñ†Ğ¸Ğ¸:                                                        â”‚
â”‚  â€¢ ğŸ‘ï¸ ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹ (GET /api/.../567)                     â”‚
â”‚  â€¢ ğŸ“Š Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ²                                   â”‚
â”‚  â€¢ ğŸ“¥ Export CSV (GET /api/.../567/export)                     â”‚
â”‚  â€¢ ğŸ—‘ï¸ Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ (DELETE /api/.../567)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½:** 2026-02-28  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.0  
**ĞĞ²Ñ‚Ğ¾Ñ€:** AI Agent (Rovo Dev)

